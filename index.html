<!doctype html>
<!-- 是的，这些东西全都是AI生成的，包括后端配置 -->
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>银行业烂梗生成器 | 银行业一样一样有有有也会有h’y’hui’t’y’r’s’c’dn</title>
  <meta name="description" content="银行业烂梗生成器 — 基于“银行业一样一样有有有也会有h’y’hui’t’y’r’s’c’dn”的冷门但注定走红的关键词，为你把‘好梗’和‘烂梗’转换成多条有趣的新梗。" />
  <meta name="keywords" content="银行业烂梗生成器, 银行业一样一样有有有也会有h’y’hui’t’y’r’s’c’dn, 造梗, 烂梗, 网络梗, 6657" />
  <meta name="author" content="api.pcmoe.com" />
  <link rel="canonical" href="https://api.pcmoe.com/" />

  <style>
	html {height: 100%}
	body {min-height: 100%}
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#94a3b8; --accent:#7c3aed; --glass: rgba(255,255,255,0.03);
      --radius:14px; font-family: Inter, "Helvetica Neue", Arial, "Noto Sans SC", sans-serif;
    }
    body{margin:0;background:linear-gradient(180deg,#071029 0%, #0b1220 60%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:32px}
    .container{width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);box-shadow:0 10px 40px rgba(2,6,23,0.7);padding:28px;position:relative}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700}
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    /* Status */
    .status{display:flex;align-items:center;gap:10px;font-size:13px}
    .dot{width:12px;height:12px;border-radius:50%;background:#f87171;box-shadow:0 0 6px rgba(248,113,113,0.4)}
    .dot.ok{background:#34d399;box-shadow:0 0 8px rgba(52,211,153,0.28)}

    main{display:grid;grid-template-columns:1fr 360px;gap:22px;align-items:start}
    @media (max-width:900px){main{grid-template-columns:1fr;}}

    .panel{background:var(--card);border-radius:12px;padding:18px; padding-right: 42px}
    label{display:block;color:var(--muted);font-size:12px;margin-bottom:6px}
    input[type=text], textarea{width:100%;padding:12px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.03);color:inherit;font-size:15px;resize:vertical}
    textarea{min-height:120px}
    .row{display:flex;gap:12px;align-items:center}

    .btn{background:linear-gradient(90deg,var(--accent),#06b6d4);border:none;padding:12px 16px;border-radius:10px;color:#041124;font-weight:700;cursor:pointer;font-size:15px;display:inline-flex;align-items:center;gap:10px}
    .btn[disabled]{opacity:0.6;cursor:not-allowed}

    .hint{font-size:12px;color:var(--muted);margin-top:8px}

    /* Loading indicator */
    .loader{display:inline-block;width:22px;height:22px;border-radius:50%;position:relative}
    .loader div{position:absolute;top:0;left:50%;width:6px;height:6px;background:white;border-radius:50%;transform-origin:center;animation:lds 1s linear infinite}
    .loader div:nth-child(1){transform:translate(-50%, -2px) rotate(0deg) translateY(-9px)}
    .loader div:nth-child(2){transform:translate(-50%, -2px) rotate(60deg) translateY(-9px);animation-delay:-0.083s}
    .loader div:nth-child(3){transform:translate(-50%, -2px) rotate(120deg) translateY(-9px);animation-delay:-0.166s}
    .loader div:nth-child(4){transform:translate(-50%, -2px) rotate(180deg) translateY(-9px);animation-delay:-0.249s}
    .loader div:nth-child(5){transform:translate(-50%, -2px) rotate(240deg) translateY(-9px);animation-delay:-0.332s}
    .loader div:nth-child(6){transform:translate(-50%, -2px) rotate(300deg) translateY(-9px);animation-delay:-0.415s}
    @keyframes lds{0%{opacity:1}100%{opacity:0.15}}

    /* Results */
    .results{margin-top:14px;display:flex;flex-direction:column;gap:8px}
    .chip{background:rgba(255,255,255,0.03);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    .chip:active{transform:scale(0.995)}
    .small{font-size:12px;color:var(--muted)}

    footer{margin-top:14px;text-align:center;color:var(--muted);font-size:13px}

    /* Toast */
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:28px;background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 8px 30px rgba(2,6,23,0.6);opacity:0;transition:opacity .2s}
    .toast.show{opacity:1}
  </style>
</head>
<body>
  <div class="container" role="main">
    <header>
      <div class="brand">
        <div class="logo">梗</div>
        <div>
          <h1>银行业烂梗生成器</h1>
          <p class="lead">围绕“银行业一样一样有有有也会有h’y’hui’t’y’r’s’c’dn”打造的烂梗生成器</p>
        </div>
      </div>

      <div class="status" aria-live="polite">
        <div id="serverDot" class="dot" title="服务器状态"></div>
        <div id="serverText" style="color:var(--muted);font-size:13px">检测中...</div>
      </div>
    </header>

    <main>
      <section class="panel">
        <label for="format">好梗（format）</label>
        <textarea id="format" placeholder="输入原梗，例如：我曾经发誓不再为了男人流泪，但是今天猎鹰这五个人的韧性还是让我剥开了虾"></textarea>
        <div style="height:12px"></div>
        <label for="input">烂梗（input）</label>
        <input id="input" type="text" placeholder="输入待转化字符串，例如：银行业一样一样有有有也会有h'y'hui't'y'r's'c'dn">

        <div class="row" style="margin-top:14px;justify-content:space-between;align-items:center">
          <div>
            <button id="generateBtn" class="btn">
              <span id="btnText">马上生成</span>
              <span id="btnLoader" style="display:none; margin-left:6px">
                <span class="loader" aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></span>
              </span>
            </button>
            <div class="hint">最长允许 128 字</div>
          </div>
        </div>

        <div id="results" class="results" aria-live="polite" style="min-height:40px"></div>
      </section>

      <aside class="panel">
        <h3 style="margin-top:0">操作说明</h3>
        <p class="small">在“好梗”中填入原梗，在“烂梗”中填入你想替换或注入的词汇串。点击“马上生成”后，我会为你生成多条烂梗。点击任意生成文本即可复制到剪贴板。</p>

        <div style="height:12px"></div>
        <div class="small">示例：</div>
        <div class="chip" style="margin-top:8px;user-select:text">好梗：【HLTV】踏破铁鞋无觅处，得来全不费工夫。G胖宣布三座blast奖杯可以合成major冠军</div>
		<div class="chip" style="margin-top:8px;user-select:text">烂梗：银行业一样一样有有有也会有h'y'hui't'y'r's'c'dn"
}</div>
		<div class="chip" style="margin-top:8px;user-select:text">新梗：【HLTV】踏破铁鞋无觅处，得来全不费工夫。Banks宣布三座银行奖杯可以合成一样一样有有有也会有h'y'hui't'y'r's'c'dn</div>
      </aside>

    </main>

    <footer>
      © <span id="year"></span> pcmoe.com — 银行业烂梗生成器
    </footer>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    (function(){
      const API_BASE = 'https://api.pcmoe.com';
      const generateBtn = document.getElementById('generateBtn');
      const btnText = document.getElementById('btnText');
      const btnLoader = document.getElementById('btnLoader');
      const resultsEl = document.getElementById('results');
      const toast = document.getElementById('toast');
      const serverDot = document.getElementById('serverDot');
      const serverText = document.getElementById('serverText');
      const yearEl = document.getElementById('year');
      yearEl.textContent = new Date().getFullYear();

      function showToast(msg, timeout=2200){
        toast.textContent = msg; toast.classList.add('show');
        setTimeout(()=>toast.classList.remove('show'), timeout);
      }

      function utf8Len(str){
        // count unicode codepoints
        return Array.from(str || '').length;
      }

      async function checkServer(){
        try{
          const r = await fetch(API_BASE + '/v1/test', {cache:'no-store'});
          if(r.ok){ serverDot.classList.add('ok'); serverDot.classList.remove('bad'); serverText.textContent='服务器：在线'; }
          else { serverDot.classList.remove('ok'); serverText.textContent='服务器：异常('+r.status+')'; }
        }catch(e){ serverDot.classList.remove('ok'); serverText.textContent='服务器：离线'; }
      }
      // initial and interval
      checkServer(); setInterval(checkServer, 8000);

      function sanitize(str){ return String(str || '').trim(); }

      function renderResults(items){
        resultsEl.innerHTML = '';
        if(!items || items.length==0) { resultsEl.innerHTML = '<div class="small">没有返回结果</div>'; return; }
        items.forEach((it, idx)=>{
          const d = document.createElement('div'); d.className='chip'; d.tabIndex=0; d.setAttribute('role','button');
          d.textContent = it;
          d.title = '点击复制';
          d.addEventListener('click', async ()=>{
            try{
              await navigator.clipboard.writeText(it);
              showToast('已复制到剪贴板');
            }catch(e){ showToast('复制失败：' + (e && e.message ? e.message : '不支持')); }
          });
          d.addEventListener('keypress', (ev)=>{ if(ev.key==='Enter' || ev.key===' ') d.click(); });
          resultsEl.appendChild(d);
        });
      }

      async function callGenerate(format, input){
        // Disable
        generateBtn.disabled = true; btnLoader.style.display='inline-block'; btnText.textContent='生成中...';
        resultsEl.innerHTML = '';
        try{
          const payload = { format, input };
          const controller = new AbortController();
          const timeout = setTimeout(()=>controller.abort(), 30000);
          const res = await fetch(API_BASE + '/v1/generate', {
            method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload), signal: controller.signal
          });
          clearTimeout(timeout);

          let data, text;
          try{ data = await res.clone().json(); }catch(e){ text = await res.text(); }

          if(!res.ok){
            // try to extract message
            if(data && data.output) renderResults(data.output);
            else showToast('服务返回错误: ' + res.status);
            return;
          }

          if(data){
            if(Array.isArray(data.output)) renderResults(data.output);
            else if(data.output && typeof data.output === 'string') renderResults([data.output]);
            else if(data.choices && Array.isArray(data.choices) && data.choices[0] && data.choices[0].message && data.choices[0].message.content){
              renderResults([data.choices[0].message.content]);
            } else { renderResults([JSON.stringify(data)]); }
          } else {
            // fallback to text
            if(text){
              // try parse 'output' from text if JSON-like
              try{ const j=JSON.parse(text); if(j.output) renderResults(j.output); else renderResults([text]); }
              catch(e){ renderResults([text]); }
            } else renderResults([]);
          }
        }catch(err){
          if(err.name === 'AbortError') showToast('请求超时'); else showToast('请求失败：' + err.message);
        }finally{
          generateBtn.disabled = false; btnLoader.style.display='none'; btnText.textContent='马上生成';
        }
      }

      generateBtn.addEventListener('click', ()=>{
        const f = sanitize(document.getElementById('format').value);
        const i = sanitize(document.getElementById('input').value);
        if(!f || !i){ showToast('请填写好梗和烂梗'); return; }
        if(utf8Len(f) > 128 || utf8Len(i) > 128){ showToast('格式或输入超过 128 字符限制'); return; }
        callGenerate(f, i);
      });

      // allow Enter to submit when focus in input
      ['format','input'].forEach(id=>{
        const el = document.getElementById(id);
        el.addEventListener('keydown', (e)=>{ if(e.key==='Enter' && (e.ctrlKey||e.metaKey)) generateBtn.click(); });
      });

      // friendly first-run sample
      document.getElementById('format').value = '我曾经发誓不再为了男人流泪，但是今天猎鹰这五个人的韧性还是让我剥开了虾';
      document.getElementById('input').value = "银行业一样一样有有有也会有h'y'hui't'y'r's'c'dn";

    })();
  </script>
</body>
</html>
